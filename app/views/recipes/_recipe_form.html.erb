<%= bootstrap_nested_form_for( @recipe, layout: :horizontal) do |r_f| %>
<p>
	<%= r_f.text_field :name, control_col: "col-sm-5"%>
</p>
<p>
	<%= r_f.number_field :prep_time, control_col: "col-sm-5", placeholder: "20 Minutes" %>
</p>
<p>
	<%= r_f.text_area :instructions, control_col: "col-sm-5", placeholder: "Please enter the introductions" %>
</p>
<p>
	<p>
		<% checked = [false, false, false] %>
		<% isdisabled = true %>
		<% help_text = ""%>
		
		
		<%= r_f.fields_for(:quantities) do |q_f| %>
		  <%= q_f.form_group :quantities, layout: :horizontal, rows: 6, control_col: "col-sm-5" do %>
        <%= q_f.number_field :quantity, hide_label: :true, placeholder: "5" %>

        <%= q_f.select :unit_id, Unit.all.collect { |u| [u.short_name, u.id]}, hide_label: true, prompt: 'Einheit' %>
        <%= q_f.select :ingredient_id, Ingredient.all.collect { |i| [i.name, i.id]}, hide_label: true, prompt: 'Zutat' %>
      <% end%>
      <%= r_f.link_to_remove t('less_ingredients') %>
		<% end %>
		<p><%= r_f.link_to_add t('more_ingredients'), :quantities %></p>
		
		
		<% case @recipe.range %>
			<% when "public" %>
				<% checked[0] = true %>
			<% when "registrated" %>
				<% checked[1] = true %>
			<% when "public" %>
				<% checked[2] = true %>
			<% else %>
				<% checked[2] = true %>
				<% isdisabled = false %>
				<% help_text = "Choose who should be able to see the recipe"%>
		<% end %>
		<%= r_f.form_group :range, layout: :horizontal, control_col: "col-sm-5", label: { text: "Visible for: " }, help: help_text do %>
			<%= r_f.radio_button :range, "public", label: t('all'), checked: checked[0], inline: true, disabled: isdisabled %>
			<%= r_f.radio_button :range, "registrated", label: t('only_registrated_user'), checked: checked[1], inline: true, disabled: isdisabled %>
			<%= r_f.radio_button :range, "private", label: t('only_me'), inline: true, checked: checked[2], disabled: isdisabled %>
		<%end%>
</p>
	<%= r_f.submit class: "btn btn-success"%>
	<p><%= back_to_list %></p>
</p>
<% end %>